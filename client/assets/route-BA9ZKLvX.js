import{y as h,r as g,A as j,n as e,F as v,w as y}from"./components-ugrZxUQv.js";import{B as w}from"./button-CYPYLthb.js";import{I as N}from"./input-AN1r0yvr.js";import{a as b,b as C,c as k,d as S,C as T}from"./card-CDCnbeVT.js";import{A as O}from"./async-img--srMHd0e.js";import{u as E,F as A,z as u,p as f,a as F,e as I}from"./hooks-Dnq9v591.js";import{g as d,s as x}from"./sessions-6JERx8g_.js";import{u as P}from"./use-session-DpKPAcv-.js";import"./util-BN2WqpqG.js";import"./createLucideIcon-DQDqlXhP.js";const q={showSearch:!1,showNavLinks:!1},p=u.object({code:u.string()}),G=async({request:t})=>{var i;const o=await t.formData();try{const s=f(o,{schema:p}),c=(i=o.get("code"))==null?void 0:i.valueOf().toString(),l=d("email");if(!c||!l)return s.reply({formErrors:["Submission error"]});const{accessToken:n,refreshToken:r}=(await F.confirmOtp({email:l,code:c})).data;return!n||!r?s.reply({formErrors:["Submission error"]}):(x("access",n),x("refresh",r,{expires:30}),s.reply())}catch(s){return I({formData:o,schema:p,error:s})}};function J(){const t=h(),[o,i]=g.useState(""),s=j(),c=P(),l=a=>{const m=a.target.value.replace(/[^0-9]/g,"");i(m)};if((t==null?void 0:t.status)==="success"){const a=d("access"),m=d("refresh");a&&m&&(c.signIn(a),s("/"))}const[n,r]=E({id:"otp-signin",onValidate({formData:a}){return f(a,{schema:p})},lastResult:t,shouldRevalidate:"onBlur"});return e.jsx("div",{className:"min-h-[calc(100vh-136px)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-[1200px] grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"w-full max-w-md mx-auto space-y-8",children:e.jsxs(b,{className:"w-full",children:[e.jsxs(C,{className:"space-y-1 text-center",children:[e.jsx(k,{className:"text-2xl",children:"OTP Verification"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enter OTP we will send to useradmit@gmail.com"})]}),e.jsx(S,{children:e.jsxs(v,{method:"post",id:n.id,onSubmit:n.onSubmit,className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center space-x-4",children:e.jsx(N,{name:r.code.name,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:7,style:{fontSize:"18px"},onChange:l,className:"w-64 h-12 text-center font-semibold tracking-widest text-gray-600",value:o})}),e.jsx("div",{className:"text-center",children:r.code.errors&&e.jsx(A,{errors:r.code.errors})}),e.jsx(w,{type:"submit",className:"w-64 bg-purple-600 hover:bg-purple-700 mx-auto flex",children:"Confirm"}),e.jsx("div",{className:"text-center",children:e.jsxs(y,{to:"/sign-in",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Back to log in"]})})]})})]})}),e.jsx("div",{className:"hidden md:block relative h-full min-h-[600px] rounded-3xl overflow-hidden bg-gradient-to-br from-purple-500 to-purple-700",children:e.jsx(O,{src:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=800&h=1200&fit=crop",alt:"OTP Verification",className:"object-cover opacity-80 h-full w-full"})})]})})}export{G as clientAction,J as default,q as handle};
