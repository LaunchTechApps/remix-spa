import{n as B,r as w}from"./components-ugrZxUQv.js";import{i as ir,s as yr,f as nr,b as x,c as T,d as Z,h as ur,j as H,k as W,l as M,_ as h,m as j,n as _,o as pr,q as br,I as or,r as Vr,t as hr,u as q,v as C,w as Or,x as Sr}from"./util-BTPqJzjT.js";function Pr(r){return r instanceof Element&&(r.tagName==="INPUT"||r.tagName==="SELECT"||r.tagName==="TEXTAREA"||r.tagName==="BUTTON")}function J(r){return Pr(r)&&r.type!=="submit"&&r.type!=="button"&&r.type!=="reset"}function Er(r){var e,t,a=r.target,n=r.submitter;return(e=(t=n==null?void 0:n.getAttribute("formaction"))!==null&&t!==void 0?t:a.getAttribute("action"))!==null&&e!==void 0?e:"".concat(location.pathname).concat(location.search)}function Ir(r){var e,t=r.target,a=r.submitter,n=(e=a==null?void 0:a.getAttribute("formenctype"))!==null&&e!==void 0?e:t.enctype;return n==="multipart/form-data"?n:"application/x-www-form-urlencoded"}function wr(r){var e,t,a=r.target,n=r.submitter,i=(e=(t=n==null?void 0:n.getAttribute("formmethod"))!==null&&t!==void 0?t:a.getAttribute("method"))===null||e===void 0?void 0:e.toUpperCase();switch(i){case"POST":case"PUT":case"PATCH":case"DELETE":return i}return"GET"}function Fr(r,e){if(ir(!!r,"Failed to submit the form. The element provided is null or undefined."),typeof r.requestSubmit=="function")r.requestSubmit(e);else{var t=new SubmitEvent("submit",{bubbles:!0,cancelable:!0,submitter:e});r.dispatchEvent(t)}}function rr(r,e){var t,a,n,i,s,o=e?void 0:r.lastResult,v=r.defaultValue?yr(r.defaultValue):{},p=(t=o==null?void 0:o.initialValue)!==null&&t!==void 0?t:v,S={formId:r.formId,isValueUpdated:!1,submissionStatus:o==null?void 0:o.status,defaultValue:v,initialValue:p,value:p,constraint:(a=r.constraint)!==null&&a!==void 0?a:{},validated:(n=o==null||(i=o.state)===null||i===void 0?void 0:i.validated)!==null&&n!==void 0?n:{},key:e?h({"":T()},R(v)):R(v),error:(s=o==null?void 0:o.error)!==null&&s!==void 0?s:{}};return lr(S,o==null?void 0:o.intent,o==null?void 0:o.fields),S}function R(r,e){return Object.entries(nr(r,{prefix:e})).reduce((t,a)=>{var[n,i]=a;if(Array.isArray(i))for(var s=0;s<i.length;s++)t[x(n,s)]=T();return t},{})}function er(r,e){for(var t of Object.keys(r.error).concat(e??[]))r.validated[t]=!0}function lr(r,e,t,a){var n;if(!e){er(r,t);return}switch(e.type){case"validate":{e.payload.name?r.validated[e.payload.name]=!0:er(r,t);break}case"update":{var{validated:i,value:s}=e.payload,o=x(e.payload.name,e.payload.index);typeof s<"u"&&tr(r,o??"",s),typeof i<"u"&&(o?H(r.validated,o,()=>{}):r.validated={},i?((W(s)||Array.isArray(s))&&Object.assign(r.validated,nr(s,{resolve(){return!0},prefix:o})),r.validated[o??""]=!0):o&&delete r.validated[o]);break}case"reset":{var v=x(e.payload.name,e.payload.index),p=ur(r.defaultValue,v);tr(r,v,p),v?(H(r.validated,v,()=>{}),delete r.validated[v]):r.validated={};break}case"insert":case"remove":case"reorder":{a&&(r.initialValue=j(r.initialValue),r.key=j(r.key),Z(r.key,e,c=>!Array.isArray(c)&&!W(c)?T():Object.assign(R(c),{[Sr]:T()})),hr(r.initialValue,e)),Z(r.validated,e),r.validated[e.payload.name]=!0;break}}var S=(n=t==null?void 0:t.filter(c=>r.validated[c]))!==null&&n!==void 0?n:[];r.error=Object.entries(r.error).reduce((c,P)=>{var[O,V]=P;return(r.validated[O]||S.some(E=>M(O,E)))&&(c[O]=V),c},{})}function tr(r,e,t){if(e===""){r.initialValue=t,r.value=t,r.key=h(h({},R(t)),{},{"":T()});return}r.initialValue=j(r.initialValue),r.value=j(r.value),r.key=j(r.key),_(r.initialValue,e,()=>t),_(r.value,e,()=>t),(W(t)||Array.isArray(t))&&(H(r.key,e,()=>{}),Object.assign(r.key,R(t,e))),r.key[e]=T()}function D(r){var e={};return new Proxy(e,{get(t,a,n){var i;if(typeof a=="string")return(i=e[a])!==null&&i!==void 0?i:e[a]=r(a,n)}})}function z(r){var e=pr(r);return D((t,a)=>{if(t==="")return e;var n=q(t),i=C(n.slice(0,-1)),s=C(n.slice(-1)),o=a[i];return ur(o,s)})}function kr(r){return D((e,t)=>{var a,n=r[e];if(!n){for(var i=q(e),s=i.length-1;s>=0;s--){var o=i[s];if(typeof o=="number"&&!Number.isNaN(o)){i[s]=Number.NaN;break}}var v=C(i);e!==v&&(n=t[v])}return(a=n)!==null&&a!==void 0?a:{}})}function Nr(r){return D((e,t)=>{var a=r[e],n=q(e);if(n.length===0)return a;var i=t[C(n.slice(0,-1))];return typeof i>"u"?a:"".concat(i,"/").concat(a??n.at(-1))})}function Ar(r){return D(e=>{var t=Object.keys(r);if(e==="")return t.length===0;for(var a of t)if(M(a,e)&&typeof r[a]<"u")return!1;return!0})}function Tr(r,e,t){return D(a=>JSON.stringify(r[a])!==JSON.stringify(e[a],(n,i)=>a===""&&n===""&&i?Object.entries(i).reduce((s,o)=>{var[v,p]=o;return t(v)?Object.assign(s??{},{[v]:p}):s},void 0):i))}function N(r,e,t,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:(O,V)=>JSON.stringify(O)!==JSON.stringify(V);if(a&&r!==e){var i,s,o=(i=a.prefix)!==null&&i!==void 0?i:[],v=(s=a.name)!==null&&s!==void 0?s:[],p=o.length===0?v:Array.from(new Set([...Object.keys(r),...Object.keys(e)])),S=function(V){if(o.length===0||v.includes(V)||o.some(L=>M(V,L))){var E;if((E=t[V])!==null&&E!==void 0||(t[V]=n(r[V],e[V])),t[V])return{v:!0}}},c;for(var P of p)if(c=S(P),c)return c.v}return!1}function Lr(r){var e=[],t=r,a=rr(r),n=s(a);function i(){return document.forms.namedItem(t.formId)}function s(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,l=arguments.length>2?arguments[2]:void 0,f=!l||d.defaultValue!==u.defaultValue?z(u.defaultValue):l.defaultValue,g=u.initialValue===u.defaultValue?f:!l||d.initialValue!==u.initialValue?z(u.initialValue):l.initialValue,m=u.value===u.initialValue?g:!l||d.value!==u.value?z(u.value):l.value;return{submissionStatus:u.submissionStatus,defaultValue:f,initialValue:g,value:m,error:!l||d.error!==u.error?u.error:l.error,validated:u.validated,constraint:!l||d.constraint!==u.constraint?kr(u.constraint):l.constraint,key:!l||d.key!==u.key?Nr(u.key):l.key,valid:!l||d.error!==u.error?Ar(u.error):l.valid,dirty:!l||d.defaultValue!==u.defaultValue||d.value!==u.value?Tr(f,m,y=>{var b,F;return(b=(F=t.shouldDirtyConsider)===null||F===void 0?void 0:F.call(t,y))!==null&&b!==void 0?b:!0}):l.dirty}}function o(u){var d=a,l=n,f=s(u,d,l);a=u,n=f;var g={value:{},error:{},initialValue:{},key:{},valid:{},dirty:{}};for(var m of e){var y,b=(y=m.getSubject)===null||y===void 0?void 0:y.call(m);(!b||b.formId&&d.formId!==u.formId||b.status&&l.submissionStatus!==f.submissionStatus||N(l.error,f.error,g.error,b.error)||N(l.initialValue,f.initialValue,g.initialValue,b.initialValue)||N(l.key,f.key,g.key,b.key,(F,U)=>F!==U)||N(l.valid,f.valid,g.valid,b.valid,v)||N(l.dirty,f.dirty,g.dirty,b.dirty,v)||N(l.value,f.value,g.value,b.value))&&m.callback()}}function v(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return u!==d}function p(){return JSON.stringify({validated:a.validated})}function S(u){var d=u.target,l=u.submitter;ir(d===i(),"The submit event is dispatched by form#".concat(d.id," instead of form#").concat(t.formId));var f=br(d,l),g={formData:f,action:Er(u),encType:Ir(u),method:wr(u)};if(typeof(t==null?void 0:t.onValidate)>"u")return g;var m=t.onValidate({form:d,formData:f,submitter:l});if(m.status==="success"||m.error!==null){var y=m.reply();G(h(h({},y),{},{status:y.status!=="success"?y.status:void 0}))}return h(h({},g),{},{submission:m})}function c(u){var d=i(),l=u.target;return!d||!J(l)||l.form!==d||!l.form.isConnected||l.name===""?null:l}function P(u,d){var{shouldValidate:l="onSubmit",shouldRevalidate:f=l}=t,g=a.validated[u.name];return g?f===d&&(d==="onInput"||a.isValueUpdated):l===d}function O(u){var d=new FormData(u),l=Or(d);o(h(h({},a),{},{isValueUpdated:!0,value:l.payload}))}function V(u){var d=c(u);!d||!d.form||(u.defaultPrevented||!P(d,"onInput")?O(d.form):K({type:"validate",payload:{name:d.name}}))}function E(u){var d=c(u);!d||u.defaultPrevented||!P(d,"onBlur")||K({type:"validate",payload:{name:d.name}})}function L(){o(rr(t,!0))}function vr(u){var d=i();u.type!=="reset"||u.target!==d||u.defaultPrevented||L()}function G(u){var d,l,f=i();if(!u.initialValue){L();return}var g=Object.entries((d=u.error)!==null&&d!==void 0?d:{}).reduce((b,F)=>{var[U,Q]=F,Y=Q===null?a.error[U]:Q;return Y&&(b[U]=Y),b},{}),m=h(h({},a),{},{isValueUpdated:!1,submissionStatus:u.status,value:u.initialValue,validated:h(h({},a.validated),(l=u.state)===null||l===void 0?void 0:l.validated),error:g});if(lr(m,u.intent,u.fields,!0),o(m),f&&u.status==="error"){for(var y of f.elements)if(J(y)&&a.error[y.name]){y.focus();break}}}function fr(u){var d=t.formId,l=t.lastResult;Object.assign(t,u),t.formId!==d?L():u.lastResult&&u.lastResult!==l&&G(u.lastResult)}function cr(u,d){var l={callback:u,getSubject:d};return e.push(l),()=>{e=e.filter(f=>f!==l)}}function mr(){return n}function K(u){var d=i(),l=document.createElement("button"),f=X(u);l.name=f.name,l.value=f.value,l.hidden=!0,l.formNoValidate=!0,d==null||d.appendChild(l),Fr(d,l),d==null||d.removeChild(l)}function X(u){return{name:or,value:Vr(u),form:t.formId,formNoValidate:!0}}function k(u){var d=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return K({type:u,payload:f})};return Object.assign(d,{getButtonProps(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return X({type:u,payload:l})}})}function gr(){var u=new MutationObserver(d=>{var l=i();if(l)for(var f of d){var g=f.type==="childList"?[...f.addedNodes,...f.removedNodes]:[f.target];for(var m of g){var y=J(m)?m:m instanceof HTMLElement?m.querySelector("input,select,textarea"):null;if((y==null?void 0:y.form)===l){O(l);return}}}});return u.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["form","name"]}),()=>{u.disconnect()}}return{getFormId(){return a.formId},submit:S,onReset:vr,onInput:V,onBlur:E,onUpdate:fr,validate:k("validate"),reset:k("reset"),update:k("update"),insert:k("insert"),remove:k("remove"),reorder:k("reorder"),subscribe:cr,getState:mr,getSerializedState:p,observe:gr}}const Gr=({errors:r})=>r?B.jsx("div",{className:"text-red-500 mt-1 left-0",children:r.map((e,t)=>B.jsx("div",{children:e},t+e))}):B.jsx(B.Fragment,{});function ar(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,a)}return t}function I(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ar(Object(t),!0).forEach(function(a){jr(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function jr(r,e,t){return e=Ur(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Cr(r,e){if(r==null)return{};var t={},a=Object.keys(r),n,i;for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}function Rr(r,e){if(r==null)return{};var t=Cr(r,e),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)a=i[n],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(t[a]=r[a])}return t}function Dr(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var a=t.call(r,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ur(r){var e=Dr(r,"string");return typeof e=="symbol"?e:String(e)}var Br=Symbol("wrapped");function Mr(r,e){var t=w.useCallback(a=>r.subscribe(a,()=>e==null?void 0:e.current),[r,e]);return w.useSyncExternalStore(t,r.getState,r.getState)}function qr(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=w.useRef(r);return e.current=r,e}function A(r,e,t,a){if(e==="status"||e==="formId")r.current[e]=!0;else if(typeof t<"u"&&typeof a<"u"){var n,i;r.current[e]=I(I({},r.current[e]),{},{[t]:((n=(i=r.current[e])===null||i===void 0?void 0:i[t])!==null&&n!==void 0?n:[]).concat(a)})}}function dr(r,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",n=a?"".concat(r.getFormId(),"-").concat(a):r.getFormId(),i=r.getState();return new Proxy({id:n,name:a,errorId:"".concat(n,"-error"),descriptionId:"".concat(n,"-description"),get initialValue(){return i.initialValue[a]},get value(){return i.value[a]},get errors(){return i.error[a]},get key(){return i.key[a]},get valid(){return i.valid[a]},get dirty(){return i.dirty[a]},get allErrors(){if(a==="")return i.error;var s={};for(var[o,v]of Object.entries(i.error))M(o,a)&&(s[o]=v);return s},get getFieldset(){return()=>new Proxy({},{get(s,o,v){return typeof o=="string"?sr(r,e,t,a,o):Reflect.get(s,o,v)}})}},{get(s,o,v){if(i===t)switch(o){case"id":case"errorId":case"descriptionId":A(e,"formId");break;case"key":case"initialValue":case"value":case"valid":case"dirty":A(e,o,"name",a);break;case"errors":case"allErrors":A(e,"error",o==="errors"?"name":"prefix",a);break}return Reflect.get(s,o,v)}})}function sr(r,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",n=arguments.length>4?arguments[4]:void 0,i=typeof n>"u"?a:C([...q(a),n]);return new Proxy({},{get(s,o,v){var p,S=dr(r,e,t,i),c=r.getState();switch(o){case"formId":return c===t&&A(e,"formId"),r.getFormId();case"required":case"minLength":case"maxLength":case"min":case"max":case"pattern":case"step":case"multiple":return(p=c.constraint[i])===null||p===void 0?void 0:p[o];case"getFieldList":return()=>{var P,O=(P=c.initialValue[i])!==null&&P!==void 0?P:[];if(c===t&&A(e,"initialValue","name",i),!Array.isArray(O))throw new Error("The initial value at the given name is not a list");return Array(O.length).fill(0).map((V,E)=>sr(r,e,t,i,E))}}return Reflect.get(S,o,v)}})}function Kr(r,e,t,a){return new Proxy({},{get(n,i,s){var o=dr(r,e,t),v=r.getState();switch(i){case"context":return{[Br]:r};case"status":return v===t&&A(e,"status"),v.submissionStatus;case"validate":case"update":case"reset":case"insert":case"remove":case"reorder":return r[i];case"onSubmit":return r.submit;case"noValidate":return a}return Reflect.get(o,i,s)}})}function Jr(r){var{onSubmit:e}=r,t=Lr(r);return I(I({},t),{},{submit(a){var n=a.nativeEvent,i=t.submit(n);if(!i.submission||i.submission.status==="success"||i.submission.error===null){if(!i.formData.has(or)){var s;(s=e)===null||s===void 0||s(a,i)}}else a.preventDefault()},onUpdate(a){e=a.onSubmit,t.onUpdate(a)}})}var zr=["id"],$=typeof document>"u"?w.useEffect:w.useLayoutEffect;function xr(r){var e=w.useId();return r??e}function Hr(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,[e,t]=w.useState(r);return $(()=>{e||t(!0)},[e]),e}function Xr(r){var{id:e}=r,t=Rr(r,zr),a=xr(e),[n]=w.useState(()=>Jr(I(I({},t),{},{formId:a})));$(()=>{var p=n.observe();return document.addEventListener("input",n.onInput),document.addEventListener("focusout",n.onBlur),document.addEventListener("reset",n.onReset),()=>{p(),document.removeEventListener("input",n.onInput),document.removeEventListener("focusout",n.onBlur),document.removeEventListener("reset",n.onReset)}},[n]),$(()=>{n.onUpdate(I(I({},t),{},{formId:a}))});var i=qr(),s=Mr(n,i),o=Hr(r.defaultNoValidate),v=Kr(n,i,s,o);return[v,v.getFieldset()]}export{Gr as F,Xr as u};
