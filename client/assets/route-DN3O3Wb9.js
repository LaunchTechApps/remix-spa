import{x as u,v as p,y as x,z as h,n as e,F as g,w as f}from"./components-BK_sQQer.js";import{z as n,p as c,a as y,s as v,b as j,g as b}from"./sessions-B53D3irw.js";import{A as N}from"./async-img-BS3wYUo9.js";import{u as w,F as l}from"./hooks-o0jWI174.js";import{B as E}from"./button-DTEMKkxa.js";import{I as S}from"./input-BQeOwKAN.js";import{c as k}from"./util-B9sxEhC4.js";/**
 * @remix-run/server-runtime v2.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const m=(t,a=302)=>u(t,a),d=n.object({email:n.string().email()}),B=async({request:t})=>{var i;const a=await t.formData(),r=c(a,{schema:d});try{const s=(i=a.get("email"))==null?void 0:i.valueOf().toString();if(!s)return r.reply({formErrors:["Email was not submitted"]});await y.requestOtp({email:s}),v("email",s)}catch(s){const o=await j(s);return o&&o.friendlyMsg!==void 0?r.reply({formErrors:[o.friendlyMsg]}):r.reply({formErrors:["Unknown error"]})}return m("/otp")},C=async()=>{const t=async()=>(await new Promise(r=>setTimeout(r,0)),"https://images.unsplash.com/photo-1546930722-a1292ed9dee8");return b("access")?m("/"):{imageUrl:t()}};function O(){const{imageUrl:t}=p(),a=x(),r=h(),[i,s]=w({id:"sign-in",onValidate({formData:o}){return c(o,{schema:d})},lastResult:a,shouldRevalidate:"onBlur"});return e.jsx("div",{className:"min-h-[calc(100vh-136px)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-[1200px] grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"LOGIN"}),e.jsx("p",{className:"text-gray-500",children:"Enter your email to receive a login code"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(g,{method:"post",id:i.id,onSubmit:i.onSubmit,children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{name:s.email.name,id:"email",type:"text",placeholder:"your@email.com",className:"pl-5 py-6 bg-gray-50/50"}),s.email.errors&&e.jsx(l,{errors:s.email.errors})]})}),e.jsx(l,{errors:i.errors}),e.jsx("div",{className:"h-5"}),e.jsx(E,{type:"submit",disabled:r.state==="submitting",className:k("w-full py-6 bg-purple-600 hover:bg-purple-700",{"opacity-40":r.state==="submitting"}),children:"Send Login Code"})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(f,{to:"/waitlist",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Join the waitlist"})]})]}),e.jsx("div",{className:"hidden md:block relative h-full min-h-[600px] rounded-3xl overflow-hidden bg-gradient-to-br from-purple-500 to-purple-700",children:e.jsx(N,{src:t,alt:"Street art",className:"object-cover opacity-80 w-full h-full"})})]})})}export{B as clientAction,C as clientLoader,O as default};
