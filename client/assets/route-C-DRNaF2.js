import{x as h,v as x,y as g,z as f,n as e,F as y,w as v}from"./components-ugrZxUQv.js";import{u as j,F as c,z as m,p as d,a as b,g as w}from"./hooks-Dnq9v591.js";import{A as N}from"./async-img--srMHd0e.js";import{B as S}from"./button-CYPYLthb.js";import{I as E}from"./input-AN1r0yvr.js";import{c as k}from"./util-BN2WqpqG.js";import{s as I,g as L}from"./sessions-6JERx8g_.js";/**
 * @remix-run/server-runtime v2.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const u=(r,s=302)=>h(r,s),p=m.object({email:m.string().email()}),z=async({request:r})=>{var a,i,n;const s=await r.formData(),t=d(s,{schema:p});try{const o=(a=s.get("email"))==null?void 0:a.valueOf().toString();if(!o)return t.reply({formErrors:["Email was not submitted"]});await b.requestOtp({email:o}),I("email",o)}catch(o){const l=await w(o);return l&&((i=l.body)==null?void 0:i.friendlyMsg)!==void 0?t.reply({formErrors:[(n=l.body)==null?void 0:n.friendlyMsg]}):t.reply({formErrors:["Unknown error was submitting email"]})}return u("/otp")},D=async()=>(await new Promise(s=>setTimeout(s,0)),"https://images.unsplash.com/photo-1546930722-a1292ed9dee8"),M=async()=>L("access")?u("/"):{imageUrl:D()},P={showSearch:!1,showNavLinks:!1};function q(){const{imageUrl:r}=x(),s=g(),t=f(),[a,i]=j({id:"sign-in",onValidate({formData:n}){return d(n,{schema:p})},lastResult:s,shouldRevalidate:"onBlur"});return e.jsx("div",{className:"min-h-[calc(100vh-136px)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-[1200px] grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"LOGIN"}),e.jsx("p",{className:"text-gray-500",children:"Enter your email to receive a login code"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(y,{method:"post",id:a.id,onSubmit:a.onSubmit,children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{name:i.email.name,id:"email",type:"text",placeholder:"your@email.com",className:"pl-5 py-6 bg-gray-50/50"}),i.email.errors&&e.jsx(c,{errors:i.email.errors})]})}),e.jsx(c,{errors:a.errors}),e.jsx("div",{className:"h-5"}),e.jsx(S,{type:"submit",disabled:t.state==="submitting",className:k("w-full py-6 bg-purple-600 hover:bg-purple-700",{"opacity-40":t.state==="submitting"}),children:"Send Login Code"})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(v,{to:"/waitlist",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Join the waitlist"})]})]}),e.jsx("div",{className:"hidden md:block relative h-full min-h-[600px] rounded-3xl overflow-hidden bg-gradient-to-br from-purple-500 to-purple-700",children:e.jsx(N,{src:r,alt:"Street art",className:"object-cover opacity-80 w-full h-full"})})]})})}export{z as clientAction,M as clientLoader,q as default,P as handle};
