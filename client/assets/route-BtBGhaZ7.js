import{x as p,v as u,y as x,z as g,n as e,F as h,w as f}from"./components-BK_sQQer.js";import{z as n,p as c,a as y,g as v}from"./util-ms_uBwoO.js";import{A as j}from"./async-img-BS3wYUo9.js";import{u as b,F as l}from"./hooks-Dr-MUb31.js";import{B as N}from"./button-DTEMKkxa.js";import{I as w}from"./input-BQeOwKAN.js";import{c as E}from"./util-B9sxEhC4.js";import{s as S,g as k}from"./sessions-BZ-gOwF9.js";/**
 * @remix-run/server-runtime v2.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const m=(t,a=302)=>p(t,a),d=n.object({email:n.string().email()}),C=async({request:t})=>{var i;const a=await t.formData(),s=c(a,{schema:d});try{const r=(i=a.get("email"))==null?void 0:i.valueOf().toString();if(!r)return s.reply({formErrors:["Email was not submitted"]});await y.requestOtp({email:r}),S("email",r)}catch(r){const o=await v(r);return o&&o.friendlyMsg!==void 0?s.reply({formErrors:[o.friendlyMsg]}):s.reply({formErrors:["Unknown error"]})}return m("/otp")},O=async()=>{const t=async()=>(await new Promise(s=>setTimeout(s,0)),"https://images.unsplash.com/photo-1546930722-a1292ed9dee8");return k("access")?m("/"):{imageUrl:t()}};function z(){const{imageUrl:t}=u(),a=x(),s=g(),[i,r]=b({id:"sign-in",onValidate({formData:o}){return c(o,{schema:d})},lastResult:a,shouldRevalidate:"onBlur"});return e.jsx("div",{className:"min-h-[calc(100vh-136px)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-[1200px] grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"LOGIN"}),e.jsx("p",{className:"text-gray-500",children:"Enter your email to receive a login code"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(h,{method:"post",id:i.id,onSubmit:i.onSubmit,children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{name:r.email.name,id:"email",type:"text",placeholder:"your@email.com",className:"pl-5 py-6 bg-gray-50/50"}),r.email.errors&&e.jsx(l,{errors:r.email.errors})]})}),e.jsx(l,{errors:i.errors}),e.jsx("div",{className:"h-5"}),e.jsx(N,{type:"submit",disabled:s.state==="submitting",className:E("w-full py-6 bg-purple-600 hover:bg-purple-700",{"opacity-40":s.state==="submitting"}),children:"Send Login Code"})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(f,{to:"/waitlist",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Join the waitlist"})]})]}),e.jsx("div",{className:"hidden md:block relative h-full min-h-[600px] rounded-3xl overflow-hidden bg-gradient-to-br from-purple-500 to-purple-700",children:e.jsx(j,{src:t,alt:"Street art",className:"object-cover opacity-80 w-full h-full"})})]})})}export{C as clientAction,O as clientLoader,z as default};
