{"version":3,"file":"async-img-Be8OCuy9.js","sources":["../../../app/components/async-img.tsx"],"sourcesContent":["import { cn } from \"@/lib/util\";\nimport type { ClassValue } from \"clsx\";\nimport { useEffect, useState } from \"react\";\n\ninterface AsyncImageProps {\n   src: string | Promise<string>;\n   alt?: string;\n   height?: number;\n   width?: number;\n   className?: ClassValue;\n}\n\nconst AsyncImg = (props: AsyncImageProps) => {\n   const { src, alt, className, height, width } = props;\n   const [isLoading, setIsLoading] = useState<boolean>(true);\n   const [error, setError] = useState<boolean>(false);\n   const [imageSrc, setImageSrc] = useState<string>(\"\");\n\n   useEffect(() => {\n      const loadImage = async () => {\n         try {\n            const resolvedSrc = typeof src === \"string\" ? src : await src;\n            setImageSrc(resolvedSrc);\n         } catch (_) {\n            setError(true);\n            setIsLoading(false);\n         }\n      };\n\n      loadImage();\n   }, [src]);\n\n   const handleLoad = (): void => {\n      setIsLoading(false);\n   };\n\n   const handleError = (): void => {\n      setIsLoading(false);\n      setError(true);\n   };\n\n   return (\n      <>\n         {isLoading && (\n            <div className=\"absolute inset-0 overflow-hidden\">\n               <div className=\"absolute inset-0 bg-gray-200\">\n                  <div className=\"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200\" />\n               </div>\n            </div>\n         )}\n\n         {error && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100\">\n               <p className=\"text-gray-500\">Failed to load image</p>\n            </div>\n         )}\n\n         {imageSrc && (\n            <img\n               src={imageSrc}\n               alt={alt}\n               className={cn(isLoading && \"invisible\", className)}\n               height={height}\n               width={width}\n               onLoad={handleLoad}\n               onError={handleError}\n            />\n         )}\n      </>\n   );\n};\n\nexport default AsyncImg;\n"],"names":["AsyncImg","props","src","alt","className","height","width","isLoading","setIsLoading","useState","error","setError","imageSrc","setImageSrc","useEffect","resolvedSrc","handleLoad","handleError","jsxs","Fragment","jsx","cn"],"mappings":"4FAYM,MAAAA,EAAYC,GAA2B,CAC1C,KAAM,CAAE,IAAAC,EAAK,IAAAC,EAAK,UAAAC,EAAW,OAAAC,EAAQ,MAAAC,GAAUL,EACzC,CAACM,EAAWC,CAAY,EAAIC,EAAAA,SAAkB,EAAI,EAClD,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAkB,EAAK,EAC3C,CAACG,EAAUC,CAAW,EAAIJ,EAAAA,SAAiB,EAAE,EAEnDK,EAAAA,UAAU,IAAM,EACK,SAAY,CACvB,GAAA,CACD,MAAMC,EAAc,OAAOb,GAAQ,SAAWA,EAAM,MAAMA,EAC1DW,EAAYE,CAAW,OACd,CACTJ,EAAS,EAAI,EACbH,EAAa,EAAK,CAAA,CAExB,GAEU,CAAA,EACV,CAACN,CAAG,CAAC,EAER,MAAMc,EAAa,IAAY,CAC5BR,EAAa,EAAK,CACrB,EAEMS,EAAc,IAAY,CAC7BT,EAAa,EAAK,EAClBG,EAAS,EAAI,CAChB,EAEA,OAEOO,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAZ,GACGa,EAAAA,IAAA,MAAA,CAAI,UAAU,mCACZ,SAACA,EAAA,IAAA,MAAA,CAAI,UAAU,+BACZ,SAACA,EAAAA,IAAA,MAAA,CAAI,UAAU,0HAAA,CAA2H,CAC7I,CAAA,EACH,EAGFV,GACGU,EAAA,IAAA,MAAA,CAAI,UAAU,gEACZ,eAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,sBAAA,CAAoB,CACpD,CAAA,EAGFR,GACEQ,EAAA,IAAC,MAAA,CACE,IAAKR,EACL,IAAAT,EACA,UAAWkB,EAAGd,GAAa,YAAaH,CAAS,EACjD,OAAAC,EACA,MAAAC,EACA,OAAQU,EACR,QAASC,CAAA,CAAA,CACZ,EAEN,CAEN"}